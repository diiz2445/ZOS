### 11. Общие понятия компьютерных сетей
Компьютерная сеть — это объединение двух или более компьютеров, связанных каналами передачи данных (проводными, например, Ethernet, или беспроводными, например, Wi-Fi). Сети позволяют обмениваться данными, совместно использовать ресурсы и обеспечивать коммуникацию между устройствами.

#### Типы сетей:
1. Коммуникационная сеть:
   - Основная задача: передача данных между устройствами.
   - Включает преобразование данных (например, кодирование, сжатие).
   - Примеры: Интернет, локальные сети (LAN).
2. Информационная сеть:
   - Фокус на хранении и управлении информацией.
   - Состоит из информационных систем (базы данных, облачные хранилища).
   - Примеры: корпоративные системы управления данными.

#### Основные компоненты:
- Сервер:
  - Центральный узел сети, выполняющий функции обработки, хранения и предоставления данных.
  - Примеры: веб-сервер (Apache), файловый сервер (Samba).
  - Обеспечивает доступ клиентам через протоколы (HTTP, FTP).
- Клиент:
  - Устройство (ПК, смартфон), запрашивающее ресурсы у сервера.
  - Примеры: браузер на компьютере, приложение на телефоне.

#### Ключевые термины:
- Топология: Физическая или логическая схема соединения устройств (звезда, шина, кольцо). Влияет на производительность и отказоустойчивость.
- Протокол: Набор правил для обмена данными. Примеры:
  - HTTP для веб-страниц.
  - SMTP для электронной почты.
- Трафик: Поток данных, измеряемый в количестве пакетов и их размере (например, мегабайты в секунду). Высокий трафик может вызывать перегрузку сети.
- Метод доступа: Регулирует, как устройства получают доступ к каналу связи. Примеры:
  - CSMA/CD (Ethernet): проверка доступности канала.
  - Token Passing (Token Ring): передача маркера.
- Сетевой интерфейс: Программный или аппаратный компонент (например, сетевая карта), обеспечивающий подключение к сети.
- IP-адрес: Уникальный числовой идентификатор устройства (например, 192.168.1.1). Бывает IPv4 и IPv6.
- Подсеть: Группа IP-адресов внутри сети, разделённая маской подсети (например, 255.255.255.0).
- Шлюз: Устройство (маршрутизатор), соединяющее разные сети, направляя трафик между ними.
- DNS (Domain Name System): Преобразует доменные имена (например, google.com) в IP-адреса (142.250.150.138).

Пример: В локальной сети офиса сервер хранит файлы, клиенты (компьютеры сотрудников) обращаются к нему через Ethernet, используя протокол SMB, а маршрутизатор (шлюз) соединяет офисную сеть с Интернетом.

---

### 12. Модель OSI
Модель OSI (Open Systems Interconnection) — это концептуальная модель, разработанная ISO в 1983–1984 годах, описывающая процесс передачи данных в сетях. Она делит процесс на семь уровней, каждый из которых выполняет определённую функцию и взаимодействует с соседними уровнями. Хотя модель OSI теоретическая, она служит основой для понимания сетевых процессов.

#### Структура модели:
1. Физический уровень:
   - Отвечает за передачу битов (0 и 1) через физическую среду (кабели, оптоволокно, радиоволны).
   - Примеры технологий: Ethernet, Wi-Fi.
   - Оборудование: кабели, разъёмы, сетевые карты.
2. Канальный уровень:
   - Обеспечивает надёжную передачу данных между соседними узлами.
   - Logical Link Control (LLC): Управление потоком, обработка ошибок.
   - Media Access Control (MAC): Присваивает уникальный аппаратный адрес (MAC-адрес, например, 00:1A:2B:3C:4D:5E).
   - Пример: Ethernet-фреймы, проверка целостности данных.
3. Сетевой уровень:
   - Отвечает за маршрутизацию пакетов между сетями.
   - Основной протокол: IP (IPv4/IPv6).
   - Функции: определение пути, добавление метаданных (IP-адреса отправителя/получателя).
4. Транспортный уровень:
   - Обеспечивает доставку данных между системами.
   - Протоколы:
     - TCP: Надёжная передача с подтверждением.
     - UDP: Быстрая, но без гарантии доставки.
   - Данные: сегменты.
5. Сеансовый уровень:
   - Управляет сеансами связи (открытие, поддержание, закрытие).
   - Пример: организация диалога между клиентом и сервером в видеочате.
6. Уровень представления:
   - Преобразует данные (кодирование, шифрование, сжатие).
   - Примеры: SSL/TLS для шифрования, JPEG для сжатия изображений.
7. Прикладной уровень:
   - Интерфейс для пользовательских приложений.
   - Протоколы: HTTP (браузеры), SMTP (почта), DNS (доменные имена).
   - Пример: браузер отправляет HTTP-запрос к веб-серверу.

#### Отличие от TCP/IP:
- OSI: Теоретическая модель с 7 уровнями, чётко разделяющая функции.
- TCP/IP: Практическая модель с 4 уровнями, объединяющая уровни OSI:
  - Сетевой доступ (OSI: физический + канальный).
  - Интернет (OSI: сетевой).
  - Транспортный (OSI: транспортный).
  - Прикладной (OSI: сеансовый + представления + прикладной).
- TCP/IP используется в Интернете, OSI — для обучения и стандартизации.

#### Прикладной уровень:
- Поддерживает протоколы, обеспечивающие работу приложений:
  - HTTP: Доступ к веб-страницам.
  - SMTP: Отправка/получение писем.
  - DNS: Преобразование имён в IP-адреса.
- Управляет соединениями:
  - Открытие (например, установление HTTP-сессии).
  - Поддержание (передача данных).
  - Закрытие (завершение сессии).

Пример: При открытии сайта браузер (прикладной уровень) отправляет HTTP-запрос, который проходит через все уровни OSI до физического, достигает сервера, где процесс повторяется в обратном порядке.

---

### 13. Протоколы транспортного уровня (TCP и UDP)
Транспортный уровень модели OSI/TCP/IP отвечает за доставку данных между системами, разделяя их на сегменты.

#### TCP (Transmission Control Protocol):
- Характеристики:
  - Надёжный: гарантирует доставку всех пакетов без ошибок.
  - Работает поверх IP.
  - Использует подтверждения (ACK) и повторную передачу при потере данных.
- Решение проблем:
  - Потеря пакетов: Повторная отправка.
  - Неправильный порядок: Пересортировка.
  - Дублирование: Удаление дубликатов.
  - Повреждение: Проверка целостности.
- Применение:
  - Передача текстовых сообщений (email, чаты).
  - Веб-страницы (HTTP/HTTPS).
  - Файловый обмен (FTP).
- Пример: Отправка письма через SMTP — TCP гарантирует, что все данные дойдут без потерь.

#### UDP (User Datagram Protocol):
- Характеристики:
  - Быстрый, но ненадёжный: не проверяет доставку.
  - Без сохранения состояния (stateless): не отслеживает соединение.
  - Минимальная нагрузка на сеть.
- Недостатки:
  - Возможны потери, повреждения или неправильный порядок пакетов.
- Применение:
  - Потоковое видео/10: Потеря нескольких пакетов не критична.
  - Онлайн-игры: скорость важнее точности.
  - VoIP (голосовые звонки): задержки недопустимы.
- Пример: В видеостриминге (YouTube) UDP используется, чтобы минимизировать задержки, даже если некоторые кадры теряются.

#### Единицы данных:
- Сегменты: На транспортном уровне (TCP/UDP).
- Пакеты: На сетевом уровне (IP).
- Кадры: На канальном уровне (Ethernet).

Пример: TCP используется для загрузки файла через FTP, а UDP — для прямой трансляции спортивного матча.

---

### 14. Сетевые интерфейсы
Сетевой интерфейс — устройство (физическое, например, сетевая карта, или виртуальное, например, VPN) для взаимодействия программ с сетью. В Linux интерфейсы создаются автоматически при обнаружении сетевых устройств.#### Типы интерфейсов (Linux):
- lo: Локальная петля для внутренней коммуникации (127.0.0.1).
- eth: Ethernet или WaveLan (беспроводной Ethernet).
- tr: Token Ring (устаревшая технология).
- ppp: Point-to-Point Protocol (например, модемы).
- sl: Serial Line IP (последовательные линии).
- plip: Parallel Line IP (через параллельный порт).
- ax: AX.25 (для радиолюбителей).
- fddi: Fiber Distributed Data Interface (высокоскоростная сеть).
- arc0e/arc0s: ArcNet (с Ethernet-инкапсуляцией).
- wlan: Wi-Fi-адаптеры.

#### Параметры интерфейса:
- IP-адрес: Уникальный адрес (например, 192.168.1.10).
- Маска подсети: Определяет диапазон адресов в подсети (например, 255.255.255.0).
- Широковещательный адрес: Для рассылки (например, 192.168.1.255).
- Метрика: Приоритет маршрута (меньше = лучше).
- MTU (Maximum Transmission Unit): Макс. размер пакета (Ethernet: 1500 байт).
- MAC-адрес: Аппаратный адрес (уникальный, 48 бит).
- Флаги: Состояние (Up/Down, promiscuous для захвата всех пакетов).
- Аппаратные характеристики: Память, IRQ, DMA, порт ввода/вывода.
- Статистика: Количество байтов, пакетов, коллизий, ошибок.

#### Пример:
- Интерфейс eth0 (Ethernet) с IP 192.168.1.100, маской 255.255.255.0 и MTU 1500 передаёт данные в локальной сети. Команда ifconfig или ip addr показывает его параметры.

---

### 15. Маршрутизация
Маршрутизация — процесс выбора оптимального пути для передачи данных между сетями. Выполняется маршрутизаторами или шлюзами.

#### Механизм:
- IP-адреса: Используются для определения источника и назначения.
- Таблицы маршрутизации: Содержат информацию о путях (например, следующая сеть, шлюз).
- Метрика: Оценивает затраты на маршрут (например, пропускная способность, задержка).
- Шлюз: Устройство, соединяющее сети (например, маршрутизатор между LAN и Интернетом).
- Протоколы маршрутизации: OSPF, BGP, RIP для динамического обновления маршрутов.

#### Пример:
- Пакет из сети 192.168.1.0/24 отправляется в 10.0.0.0/24 через шлюз 192.168.1.1, который перенаправляет его на основе таблицы маршрутизации.

---

### 16. Разграничение прав доступа
Разграничение прав доступа — процесс управления доступом пользователей к ресурсам (системы, базы данных, файлы) для обеспечения безопасности.

#### Компоненты:
- Пользователи/учётные записи: Идентифицируют субъектов (например, логин).
- Ресурсы: Объекты (файлы, базы данных, приложения).
- Разрешения: Уровень доступа (чтение, запись, администрирование).

#### Типы прав:
1. Административные:
   - Полный доступ к инфраструктуре.
   - Управление пользователями, настройками, правами.
   - Присваиваются: администраторам, владельцам ресурсов.
2. Пользовательские:
   - Ограничены задачами.
   - Группы:
     - Администраторы: широкий доступ.
     - Операторы: управление системами.
     - Менеджеры: доступ к данным.
     - Рядовые: минимальные права.
   - Права:
     - Чтение: просмотр.
     - Запись: изменение.
     - Изменение/удаление БД: модификация структуры.
     - Администрирование: управление системами.
     - Изменение разрешений: управление правами.
3. Групповые:
   - Назначаются группам с одинаковыми задачами.
   - Поддерживают временные привилегии для проектов.
   - Автоматизируют управление в крупных организациях.

#### Модели управления доступом:
- DAC (Discretionary Access Control):
  - Администраторы/владельцы задают права.
  - Простая, но менее безопасная.
- MAC (Mandatory Access Control):
  - Основана на метках конфиденциальности (например, «секретно»).
  - Сложная, для высокой безопасности.
- RBAC (Role-Based Access Control):
  - Права привязаны к ролям (например, «бухгалтер»).
  - Удобна для организаций с >50 сотрудников.
- ABAC (Attribute-Based Access Control):
  - Права на основе атрибутов (роль, время, местоположение).
  - Гибкая, для крупных компаний.

#### Пример:
- Рядовой сотрудник имеет право чтения в БД, оператор — записи, администратор — управления структурой и правами.

---
#### Типы интерфейсов (Linux):
- lo: Локальная петля для внутренней коммуникации (127.0.0.1).
- eth: Ethernet или WaveLan (беспроводной Ethernet).
- tr: Token Ring (устаревшая технология).
- ppp: Point-to-Point Protocol (например, модемы).
- sl: Serial Line IP (последовательные линии).
- plip: Parallel Line IP (через параллельный порт).
- ax: AX.25 (для радиолюбителей).
- fddi: Fiber Distributed Data Interface (высокоскоростная сеть).
- arc0e/arc0s: ArcNet (с Ethernet-инкапсуляцией).
- wlan: Wi-Fi-адаптеры.

#### Параметры интерфейса:
- IP-адрес: Уникальный адрес (например, 192.168.1.10).
- Маска подсети: Определяет диапазон адресов в подсети (например, 255.255.255.0).
- Широковещательный адрес: Для рассылки (например, 192.168.1.255).
- Метрика: Приоритет маршрута (меньше = лучше).
- MTU (Maximum Transmission Unit): Макс. размер пакета (Ethernet: 1500 байт).
- MAC-адрес: Аппаратный адрес (уникальный, 48 бит).
- Флаги: Состояние (Up/Down, promiscuous для захвата всех пакетов).
- Аппаратные характеристики: Память, IRQ, DMA, порт ввода/вывода.
- Статистика: Количество байтов, пакетов, коллизий, ошибок.

#### Пример:
- Интерфейс eth0 (Ethernet) с IP 192.168.1.100, маской 255.255.255.0 и MTU 1500 передаёт данные в локальной сети. Команда ifconfig или ip addr показывает его параметры.

---

### 15. Маршрутизация
Маршрутизация — процесс выбора оптимального пути для передачи данных между сетями. Выполняется маршрутизаторами или шлюзами.

#### Механизм:
- IP-адреса: Используются для определения источника и назначения.
- Таблицы маршрутизации: Содержат информацию о путях (например, следующая сеть, шлюз).
- Метрика: Оценивает затраты на маршрут (например, пропускная способность, задержка).
- Шлюз: Устройство, соединяющее сети (например, маршрутизатор между LAN и Интернетом).
- Протоколы маршрутизации: OSPF, BGP, RIP для динамического обновления маршрутов.

#### Пример:
- Пакет из сети 192.168.1.0/24 отправляется в 10.0.0.0/24 через шлюз 192.168.1.1, который перенаправляет его на основе таблицы маршрутизации.

---

### 16. Разграничение прав доступа
Разграничение прав доступа — процесс управления доступом пользователей к ресурсам (системы, базы данных, файлы) для обеспечения безопасности.

#### Компоненты:
- Пользователи/учётные записи: Идентифицируют субъектов (например, логин).
- Ресурсы: Объекты (файлы, базы данных, приложения).
- Разрешения: Уровень доступа (чтение, запись, администрирование).

#### Типы прав:
1. Административные:
   - Полный доступ к инфраструктуре.
   - Управление пользователями, настройками, правами.
   - Присваиваются: администраторам, владельцам ресурсов.
2. Пользовательские:
   - Ограничены задачами.
   - Группы:
     - Администраторы: широкий доступ.
     - Операторы: управление системами.
     - Менеджеры: доступ к данным.
     - Рядовые: минимальные права.
   - Права:
     - Чтение: просмотр.
     - Запись: изменение.
     - Изменение/удаление БД: модификация структуры.
     - Администрирование: управление системами.
     - Изменение разрешений: управление правами.
3. Групповые:
   - Назначаются группам с одинаковыми задачами.
   - Поддерживают временные привилегии для проектов.
   - Автоматизируют управление в крупных организациях.

#### Модели управления доступом:
- DAC (Discretionary Access Control):
  - Администраторы/владельцы задают права.
  - Простая, но менее безопасная.
- MAC (Mandatory Access Control):
  - Основана на метках конфиденциальности (например, «секретно»).
  - Сложная, для высокой безопасности.
- RBAC (Role-Based Access Control):
  - Права привязаны к ролям (например, «бухгалтер»).
  - Удобна для организаций с >50 сотрудников.
- ABAC (Attribute-Based Access Control):
  - Права на основе атрибутов (роль, время, местоположение).
  - Гибкая, для крупных компаний.

#### Пример:
- Рядовой сотрудник имеет право чтения в БД, оператор — записи, администратор — управления структурой и правами.

---
### 17. Аутентификация
Аутентификация — процесс подтверждения личности пользователя для доступа к ресурсам.

#### Kerberos
Плюсы
- Эффективная аутентификация 
-	Наличие взаимной аутентификация (проверка соединения с обоих машин)
-	Возможность делегирования аутентификации (при логине в один домен, нет необходимости логиниться в дружественный домен)
-	Упрощенное управление доверительными отношениями
-	Совместимость с другими версиями аутентификации, при отсутствии на машине Kerberos происходит односторонняя аутентификация с помощью протокола NTLM
#### Шаги аутентификации
KDC – key distribution center 

![image](https://github.com/user-attachments/assets/e9fc1650-4a03-4ebf-9f72-2a1d9b40abef)

1.	Request на идентификацию (ID, (timestamp,имя домена)K)
2.	Возврат ((timestamp, public key)k, TGT) - Ticket Granting Ticket; Клиент авторизован на KDC
3.	Отправка на KDC TGT
4.	(Timestamp1, PubliKey)k1 шифрованный key1, TGS – Ticket Granting Service)
5.	TGS, (Timestamp1, PubliKey)k1
В конечном счете клиент хранит: public key, TGT,TGS, (Timestamp1, PubliKey)k1


---

### 18. Аудит и журналирование
Linux Auditd — система для анализа событий в Linux, встроенная в ядро (с версии 2.6). Помогает выявлять уязвимости через логи, но не обеспечивает прямую защиту.

#### Архитектура:
- Функции:
  - Перехват системных вызовов (доступ к файлам, запуск программ, сетевые подключения).
  - Логи включают:
    - Время включения/выключения.
    - Изменения конфигурации.
    - Сетевые события.
- Процесс:
  - Действие → фильтр exclude → обработка в auditd.
  - Работает в реальном времени.

#### Конфигурация:
- Настройки:
  - Место хранения логов.
  - Формат и размер логов.
  - Действия при переполнении диска.
  - Синхронизация буфера.
- Пример: Логи в /var/log/audit/, максимальный размер файла — 10 МБ.

#### Правила аудита:
- Типы:
  - task: Запуск задач.
  - entry: Вход в системный вызов.
  - exit: Выход из вызова.
  - user: Действия пользователя.
  - exclude: Исключение событий.
- Создание:
  - Команда: auditctl.
  - Файл: /etc/audit/audit.rules.
- Пример: Правило для аудита доступа к /etc/passwd.

#### Инструменты:
- aureport:
  - Преобразует логи в читаемый формат.
  - Отчёты: системные вызовы, попытки входа.
  - Фильтры: по дате, времени, пользователю.
- ausearch:
  - Детальный поиск событий.
  - Поля: type (тип), MSG (время), syscall (вызов), success (успех).
- autrace:
  - Отслеживание процессов.
  - Пример: sudo autrace /bin/date для анализа команды date.
- Централизованное хранение:
  - Плагин audisp-remote.
  - Установка: sudo apt-get install audisp-plugins.
  - Позволяет доступ к логам с других устройств.

#### Пример:
- Администратор использует aureport --login для анализа попыток входа и ausearch -ts today для событий за день.

---

### 19. Шифрование
Шифрование защищает данные от несанкционированного доступа, применяясь на уровне файловой системы или устройства.
#### На уровне файловой системы:
- eCryptfs:
  - Многоуровневое шифрование (Ubuntu, домашняя папка).
  - Требует ключ для расшифровки.
  - Работает поверх существующей ФС.
- EncFS:
  - Зашифрованная ФС через библиотеку FUSE.
  - Прозрачное шифрование/расшифровка.
  - Пример: Защита папки ~/private.

#### Блочное шифрование:
- Loop-AES:
  - Быстрое шифрование (разделы, swap).
  - Использует AES (симметричный алгоритм).
- TrueCrypt:
  - Шифрование дисков (Windows/Linux).
  - Устарело, поддержка прекращена.
- dm-crypt/LUKS:
  - Шифрование дисков, разделов, RAID.
  - Прозрачное через /dev/mapper.
  - LUKS: Стандарт для управления ключами.
  - Пример: Зашифрованный раздел /dev/sda1.

#### Принципы:
- Файловая система: Не затрагивает нижележащие разделы, шифрует отдельные файлы.
- Блочное: Шифрует весь раздел, преобразует блоки данных.
- Процесс: Запись → шифрование → диск; чтение → расшифровка.

#### Пример:
- LUKS шифрует внешний USB-диск, пользователь вводит пароль для доступа.

---

### 20. Средства сетевой защиты и уязвимости
Сетевая защита в Linux минимизирует риски атак, а понимание уязвимостей помогает их устранять.

#### Средства защиты:
1. Брандмауэр:
   - Контролирует порты/протоколы.
   - Инструменты: iptables, UFW, firewalld.
   - Пример: ufw allow 22 открывает порт SSH.
2. Надёжные пароли:
   - ≥8 символов, буквы, цифры, спецсимволы.
   - Пример: Использование pwgen для генерации.
3. Ограничение доступа:
   - Разрешения для файлов/каталогов (chmod, chown).
   - Пример: chmod 600 secret.txt.
4. Шифрование:
   - SSL/TLS (веб), IPSec (VPN), OpenVPN.
   - Пример: Настройка HTTPS с Let’s Encrypt.
5. Мониторинг:
   - Инструменты: Wireshark, tcpdump, ntopng.
   - Пример: tcpdump -i eth0 для анализа трафика.
6. Отключение служб/портов:
   - Уменьшает поверхность атаки.
   - Пример: systemctl disable ftp.
7. IDS/IPS:
   - Обнаружение (Snort) и предотвращение атак.
   - Пример: Блокировка подозрительного IP.
8. Аудиты:
   - Регулярная проверка уязвимостей (Lynis, OpenVAS).
9. Безопасные дистрибутивы:
   - Tails, Whonix (анонимность).
   - Qubes OS, Alpine Linux (безопасность).

#### Уязвимости:
1. Ошибки конфигурации:
   - Неправильные настройки (открытые порты, слабые права).
   - Пример: Публичный доступ к /etc/.
2. Слабые пароли:
   - Долгое время жизни (99 999 дней в Debian/Ubuntu).
   - Отсутствие проверки сложности (нужен libpam-pwquality).
   - Пример: Взлом Tesla через слабую аутентификацию Kubernetes.
3. Уязвимые службы:
   - Открытые порты (FTP, SMB, NFS).
   - Пример: Публичный FTP-сервер с листингом.
4. Вредоносное ПО:
   - Типы: вымогатели, криптомайнеры, руткиты, веб-шеллы, трояны.
   - Руткиты: Скрывают присутствие, подменяют утилиты.
   - Пример: Веб-шелл на Apache для удалённого доступа.

#### Пример:
- Сервер с открытым портом 21 (FTP) уязвим для атак. Настройка UFW (ufw deny 21) и аудит с помощью Lynis устраняют проблему.

---

### Примечания
- Каждая тема раскрыта с примерами и дополнительными пояснениями, сохраняя структуру документа.
- Если нужны конкретные вопросы или дальнейшая детализация (например, команды Linux, примеры конфигураций), уточните, и я дополню ответ.
